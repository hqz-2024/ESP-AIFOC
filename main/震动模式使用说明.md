# 震动模式使用说明

## 功能概述

震动模式通过设定振幅、频率和扭矩限制，实现电机的正弦波震动运动。

---

## 控制参数

| 参数 | 说明 | 单位 | 范围 |
|-----|------|------|------|
| 振幅 (Amplitude) | 震动的角度范围 | rad | 0 ~ 10 |
| 频率 (Frequency) | 每秒震动次数 | Hz | 0.1 ~ 100 |
| 扭矩限制 (Torque) | 震动时的力度限制 | A 或 V | 根据硬件配置 |

---

## Web界面控制

### 1. 切换到震动模式

1. 打开Web控制界面
2. 在"控制模式"下拉框中选择"震动模式 (Vibration)"
3. 设置震动参数：
   - **振幅**：震动的角度范围（如 0.5 rad）
   - **频率**：震动速度（如 1.0 Hz = 每秒1次）
   - **扭矩限制**：震动力度（如 1.0 A）
4. 点击"✓ 应用设置"

### 2. 参数调整建议

- **低频大幅震动**：振幅 1.0 rad，频率 0.5 Hz
- **高频小幅震动**：振幅 0.2 rad，频率 5.0 Hz
- **中等震动**：振幅 0.5 rad，频率 1.0 Hz

---

## 串口命令控制

### 1. 切换到震动模式

```
SET_MODE,VIB
```

**回应：**
```
ACK,SET_MODE,OK
```

### 2. 设置震动参数

**命令：** `SET_VIBRATION,<amplitude>,<frequency>,<torque>\r\n`

**参数：**
- `amplitude`: 振幅（rad）
- `frequency`: 频率（Hz）
- `torque`: 扭矩限制（A 或 V）

**示例：**
```
SET_VIBRATION,0.5,1.0,1.0
```

**回应：**
```
ACK,SET_VIBRATION,OK
```

### 3. 完整示例

```
SET_MODE,VIB
SET_VIBRATION,0.5,2.0,1.5
```

---

## Python上位机控制

### 1. 界面操作

1. 在"控制模式"中选择"VIB (震动)"
2. 震动参数区域会自动显示
3. 设置参数：
   - 振幅：0.5 rad
   - 频率：1.0 Hz
   - 扭矩限制：1.0 A/V
4. 点击"应用震动参数"

### 2. 实时调整

震动模式下可以实时调整参数，无需停止电机。

---

## 工作原理

震动模式基于位置控制，目标角度按正弦波变化：

```
目标角度 = 振幅 × sin(2π × 频率 × 时间)
```

- 电机会在 `[-振幅, +振幅]` 范围内往复运动
- 频率决定震动速度
- 扭矩限制控制震动力度

---

## 注意事项

1. **振幅设置**：过大的振幅可能导致机械结构损坏
2. **频率限制**：过高频率可能超出电机响应能力
3. **扭矩限制**：根据负载调整，避免堵转
4. **启动建议**：从小振幅、低频率开始测试
5. **安全检查**：确保机械结构能承受震动

---

## 应用场景

- 振动筛分
- 按摩设备
- 振动测试
- 共振实验
- 动态平衡测试

---

## 故障排查

### 问题1：震动不规律

- 检查频率是否过高
- 降低振幅或扭矩限制
- 检查PID参数是否合适

### 问题2：震动幅度不足

- 增加扭矩限制
- 检查负载是否过大
- 调整位置环PID参数

### 问题3：电机发热

- 降低频率或振幅
- 减小扭矩限制
- 检查散热条件

